version: '3.8'

services:
  gemini-co-cli:
    build: .
    ports:
      - "3000:3000"
    environment:
      - RUST_LOG=gemini_co_cli=debug,tower_http=debug
      # Pass GEMINI_API_KEY from host environment or .env file
      # Get your key from: https://aistudio.google.com/apikey
      - GEMINI_API_KEY=${GEMINI_API_KEY:-}
      # Force pseudo-terminal allocation for Gemini CLI
      - TERM=xterm-256color
    restart: unless-stopped
    stdin_open: true
    tty: true
    volumes:
      - ./static:/app/static:ro
      # Mount Gemini CLI config directory for persistent auth
      # OAuth credentials are stored here after running 'gemini' interactively
      - gemini-config:/root/.config/@google/generative-ai-cli

volumes:
  gemini-config:
